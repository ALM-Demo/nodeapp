FROM node:12.2
ARG PUID
ARG PGID

RUN addgroup -g ${PGID} abc && \
    adduser -D -u ${PUID} -G abc abc
ENV HOME=/home/app
RUN apt-get update && apt-get install htop
COPY package.json package-lock.json $HOME/node_docker/
WORKDIR $HOME/node_docker
RUN npm install --silent --progress=false
COPY . $HOME/node_docker
EXPOSE 8080
USER abc
CMD [ "node", "server.js" ]
